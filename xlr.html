<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宫的小六壬 - 连数起课法</title>
    <script src="https://cdn.tailwindcss.com/3.3.3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #2d3748;
            overflow-x: hidden;
        }

        .glassmorphism {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 28px 0 rgba(31, 38, 135, 0.2);
        }

        .highlight-text {
            position: relative;
            display: inline-block;
        }

        .highlight-text::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background-color: rgba(99, 102, 241, 0.2);
            z-index: -1;
        }

        .result-card {
            transition: all 0.3s ease;
            border-radius: 12px;
            overflow: hidden;
        }

        .result-card:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .input-field {
            transition: all 0.3s ease;
        }

        .input-field:focus {
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .btn-submit {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            transition: all 0.3s ease;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.5);
        }

        .btn-submit:active {
            transform: translateY(0);
        }

        .shadow-glow {
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.5);
        }

        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.3), transparent);
        }

        .animated-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255, 105, 180, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(79, 70, 229, 0.05) 0%, transparent 50%);
        }
        
        .method-step {
            transition: all 0.3s ease;
        }
        
        .method-step:hover {
            background-color: rgba(99, 102, 241, 0.05);
            transform: translateX(5px);
        }
    </style>
</head>
<body class="min-h-screen relative">
    <div class="animated-bg"></div>

    <!-- 导航条 -->
    <nav class="glassmorphism sticky top-0 z-50 p-4 mb-8">
        <div class="container mx-auto flex items-center justify-between">
            <div class="text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text">
                <i class="fas fa-chart-pie mr-2"></i>宫的小六壬
            </div>
        </div>
    </nav>

    <!-- 头部横幅 -->
    <header class="container mx-auto py-12 px-4 md:px-8 relative">
        <div class="max-w-4xl mx-auto text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-4">宫的小六壬</h1>
            <p class="text-lg text-gray-600 mb-8">你如果遇到小困难，不妨输入三个数字测一测</p>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="container mx-auto py-8 px-4 md:px-8">
        <!-- 输入区域 -->
        <div class="glassmorphism p-8 mb-12">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-center text-white mr-3">
                    <i class="fas fa-calculator"></i>
                </div>
                占卜输入
            </h2>
            
            <form id="divinationForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="space-y-2">
                        <label for="num1" class="block text-sm font-medium text-gray-700">第一个数字 (1-12)</label>
                        <input type="number" id="num1" name="num1" min="1" max="12" class="input-field w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入1-12之间的整数" required>
                        <p id="error1" class="text-red-500 text-xs hidden">请输入1-12之间的整数</p>
                    </div>
                    <div class="space-y-2">
                        <label for="num2" class="block text-sm font-medium text-gray-700">第二个数字 (1-12)</label>
                        <input type="number" id="num2" name="num2" min="1" max="12" class="input-field w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入1-12之间的整数" required>
                        <p id="error2" class="text-red-500 text-xs hidden">请输入1-12之间的整数</p>
                    </div>
                    <div class="space-y-2">
                        <label for="num3" class="block text-sm font-medium text-gray-700">第三个数字 (1-12)</label>
                        <input type="number" id="num3" name="num3" min="1" max="12" class="input-field w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入1-12之间的整数" required>
                        <p id="error3" class="text-red-500 text-xs hidden">请输入1-12之间的整数</p>
                    </div>
                </div>
                
                <!-- 新增问事内容输入框 -->
                <div class="space-y-2">
                    <label for="question" class="block text-sm font-medium text-gray-700">问事内容</label>
                    <textarea id="question" name="question" rows="3" class="input-field w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入您想询问的事情，如："近期财运如何？"、"感情发展状况"等" required></textarea>
                    <p id="errorQuestion" class="text-red-500 text-xs hidden">请输入问事内容</p>
                </div>
                
                <div class="flex justify-center">
                    <button type="submit" class="btn-submit text-white font-medium py-3 px-8 rounded-lg flex items-center">
                        <i class="fas fa-magic mr-2"></i>开始占卜
                    </button>
                </div>
            </form>
        </div>

        <!-- 结果显示区域 -->
        <div id="resultArea" class="glassmorphism p-8 hidden">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-center text-white mr-3">
                    <i class="fas fa-scroll"></i>
                </div>
                占卜结果
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div id="result1" class="result-card p-6 flex flex-col items-center justify-center text-center">
                    <div class="w-16 h-16 rounded-full flex items-center justify-center mb-4 text-white text-xl font-bold"></div>
                    <h3 class="text-xl font-bold mb-2"></h3>
                    <p class="text-gray-600"></p>
                </div>
                <div id="result2" class="result-card p-6 flex flex-col items-center justify-center text-center">
                    <div class="w-16 h-16 rounded-full flex items-center justify-center mb-4 text-white text-xl font-bold"></div>
                    <h3 class="text-xl font-bold mb-2"></h3>
                    <p class="text-gray-600"></p>
                </div>
                <div id="result3" class="result-card p-6 flex flex-col items-center justify-center text-center">
                    <div class="w-16 h-16 rounded-full flex items-center justify-center mb-4 text-white text-xl font-bold"></div>
                    <h3 class="text-xl font-bold mb-2"></h3>
                    <p class="text-gray-600"></p>
                </div>
            </div>
            
            <div class="text-center">
                <button id="resetButton" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-6 rounded-lg transition-colors">
                    <i class="fas fa-redo-alt mr-2"></i>重新占卜
                </button>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="container mx-auto py-8 px-4 md:px-8 mt-12">
        <div class="divider mb-6"></div>
        <div class="text-center text-gray-500 text-sm">
            <p>created by <a href="https://space.coze.cn" class="text-indigo-600 hover:underline">coze space</a></p>
            <p class="mt-2">页面内容均由 AI 生成，仅供参考</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 神煞数据
            const divinationData = {
                1: { name: '大安', meaning: '静止吉祥，凡事可成', color: 'bg-blue-500', bgColor: 'bg-blue-50', textColor: 'text-blue-700' },
                2: { name: '留连', meaning: '拖延纠缠，办事不利', color: 'bg-purple-500', bgColor: 'bg-purple-50', textColor: 'text-purple-700' },
                3: { name: '速喜', meaning: '喜庆快速，吉事将至', color: 'bg-green-500', bgColor: 'bg-green-50', textColor: 'text-green-700' },
                4: { name: '赤口', meaning: '口舌凶险，需防是非', color: 'bg-red-500', bgColor: 'bg-red-50', textColor: 'text-red-700' },
                5: { name: '小吉', meaning: '和合吉利，运势顺畅', color: 'bg-yellow-500', bgColor: 'bg-yellow-50', textColor: 'text-yellow-700' },
                6: { name: '空亡', meaning: '虚妄无果，谋事难成', color: 'bg-gray-500', bgColor: 'bg-gray-50', textColor: 'text-gray-700' }
            };

            // 表单提交处理
            const form = document.getElementById('divinationForm');
            const resultArea = document.getElementById('resultArea');
            const resetButton = document.getElementById('resetButton');

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // 获取输入值
                const num1 = parseInt(document.getElementById('num1').value);
                const num2 = parseInt(document.getElementById('num2').value);
                const num3 = parseInt(document.getElementById('num3').value);
                const question = document.getElementById('question').value.trim();
                
                // 验证输入
                let isValid = true;
                
                if (isNaN(num1) || num1 < 1 || num1 > 12) {
                    document.getElementById('error1').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('error1').classList.add('hidden');
                }
                
                if (isNaN(num2) || num2 < 1 || num2 > 12) {
                    document.getElementById('error2').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('error2').classList.add('hidden');
                }
                
                if (isNaN(num3) || num3 < 1 || num3 > 12) {
                    document.getElementById('error3').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('error3').classList.add('hidden');
                }
                
                if (!question) {
                    document.getElementById('errorQuestion').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('errorQuestion').classList.add('hidden');
                }
                
                if (!isValid) return;
                
                // 计算落点（采用连数起课法）
                // 步骤1：六神顺序固定为大安(1)、留连(2)、速喜(3)、赤口(4)、小吉(5)、空亡(6)
                // 步骤2：从大安开始，第一个数字n1从1数到n1确定第一落点
                const position1 = calculatePosition(1, num1);
                // 步骤3：第二个数字n2从第一落点开始数n2确定第二落点
                const position2 = calculatePosition(position1, num2);
                // 步骤4：第三个数字n3从第二落点开始数n3确定第三落点
                const position3 = calculatePosition(position2, num3);
                
                // 显示结果
                displayResult(position1, position2, position3);
                
                // 显示结果区域
                resultArea.classList.remove('hidden');
                
                // 平滑滚动到结果区域
                resultArea.scrollIntoView({ behavior: 'smooth' });
            });
            
            // 重置按钮事件
            resetButton.addEventListener('click', function() {
                form.reset();
                resultArea.classList.add('hidden');
                
                // 平滑滚动到表单区域
                form.scrollIntoView({ behavior: 'smooth' });
            });
            
            // 计算落点位置的函数（连数起课法）
            function calculatePosition(startPosition, steps) {
                // 六神循环：1->2->3->4->5->6->1->...
                // 从起始位置开始，数steps步（包括起始位置）
                const position = (startPosition + steps - 1 - 1) % 6 + 1;
                return position;
            }
            
            // 显示结果函数
            function displayResult(r1, r2, r3) {
                // 清除之前的结果样式
                clearResultStyles();
                
                // 设置第一个结果
                const result1 = document.getElementById('result1');
                result1.classList.add(divinationData[r1].bgColor);
                result1.querySelector('div').classList.add(divinationData[r1].color);
                result1.querySelector('div').textContent = r1;
                result1.querySelector('h3').classList.add(divinationData[r1].textColor);
                result1.querySelector('h3').textContent = divinationData[r1].name;
                result1.querySelector('p').textContent = divinationData[r1].meaning;
                
                // 设置第二个结果
                const result2 = document.getElementById('result2');
                result2.classList.add(divinationData[r2].bgColor);
                result2.querySelector('div').classList.add(divinationData[r2].color);
                result2.querySelector('div').textContent = r2;
                result2.querySelector('h3').classList.add(divinationData[r2].textColor);
                result2.querySelector('h3').textContent = divinationData[r2].name;
                result2.querySelector('p').textContent = divinationData[r2].meaning;
                
                // 设置第三个结果
                const result3 = document.getElementById('result3');
                result3.classList.add(divinationData[r3].bgColor);
                result3.querySelector('div').classList.add(divinationData[r3].color);
                result3.querySelector('div').textContent = r3;
                result3.querySelector('h3').classList.add(divinationData[r3].textColor);
                result3.querySelector('h3').textContent = divinationData[r3].name;
                result3.querySelector('p').textContent = divinationData[r3].meaning;
            }
            
            // 清除结果样式函数
            function clearResultStyles() {
                const resultCards = document.querySelectorAll('.result-card');
                const colors = ['bg-blue-500', 'bg-purple-500', 'bg-green-500', 'bg-red-500', 'bg-yellow-500', 'bg-gray-500'];
                const bgColors = ['bg-blue-50', 'bg-purple-50', 'bg-green-50', 'bg-red-50', 'bg-yellow-50', 'bg-gray-50'];
                const textColors = ['text-blue-700', 'text-purple-700', 'text-green-700', 'text-red-700', 'text-yellow-700', 'text-gray-700'];
                
                resultCards.forEach(card => {
                    // 移除背景颜色类
                    bgColors.forEach(color => card.classList.remove(color));
                    
                    // 移除数字圆圈颜色类
                    const circle = card.querySelector('div');
                    colors.forEach(color => circle.classList.remove(color));
                    
                    // 移除标题颜色类
                    const title = card.querySelector('h3');
                    textColors.forEach(color => title.classList.remove(color));
                });
            }
            
            // 输入框实时验证
            const inputs = form.querySelectorAll('input[type="number"]');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    const errorElement = document.getElementById(`error${this.id.charAt(this.id.length - 1)}`);
                    
                    if (isNaN(value) || value < 1 || value > 12) {
                        errorElement.classList.remove('hidden');
                    } else {
                        errorElement.classList.add('hidden');
                    }
                });
            });
            
            // 问事内容实时验证
            const questionInput = document.getElementById('question');
            questionInput.addEventListener('input', function() {
                const errorElement = document.getElementById('errorQuestion');
                
                if (!this.value.trim()) {
                    errorElement.classList.remove('hidden');
                } else {
                    errorElement.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
